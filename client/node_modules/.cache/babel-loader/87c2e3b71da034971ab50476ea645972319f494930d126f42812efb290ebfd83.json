{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\DELL\\\\Desktop\\\\web development\\\\New folder (2)\\\\client\\\\src\\\\Header.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from 'react';\nimport { Link } from 'react-router-dom';\nimport { UserContext } from './UserContext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function Header() {\n  _s();\n  const {\n    setUserInfo,\n    userInfo\n  } = useContext(UserContext); // const [username,setUsernme]= useState(null); \n  useEffect(() => {\n    //checking if we are logged in--> how:we have token inside our cookies but anyone can have cookies so we need check this token if it's valid need to create endpoint for this( this is our endpoint useEffect)\n    fetch('http://localhost:4000/profile', {\n      credentials: 'include'\n    }).then(response => {\n      response.json().then(userInfo => {\n        // setUsernme(userInfo.username);\n        setUserInfo(userInfo); // setting above fetched username name\n      });\n    });\n  }, []);\n  function logout() {\n    //we have reset cookie\n    fetch('http://localhost:4000/logout', {\n      credentials: 'include',\n      method: 'POST'\n    });\n    setUserInfo(null);\n  }\n  const username = userInfo === null || userInfo === void 0 ? void 0 : userInfo.username;\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    children: [/*#__PURE__*/_jsxDEV(Link, {\n      to: \"/\",\n      className: \"logo\",\n      children: \"MyBlog\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 28,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      children: [username && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          children: [\"Hello, \", username]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 32,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/create\",\n          children: \"Create new post\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 33,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          onClick: logout,\n          children: \"Logout(\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 34,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true), !username && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(Link, {\n          to: \"/login\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(Link, {\n          to: \"/register\",\n          children: \"Register\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 29,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 27,\n    columnNumber: 5\n  }, this);\n}\n_s(Header, \"fUtGLTslfSVfnGRaMRz+5386dec=\");\n_c = Header;\nvar _c;\n$RefreshReg$(_c, \"Header\");","map":{"version":3,"names":["useContext","useEffect","useState","Link","UserContext","jsxDEV","_jsxDEV","Fragment","_Fragment","Header","_s","setUserInfo","userInfo","fetch","credentials","then","response","json","logout","method","username","children","to","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","_c","$RefreshReg$"],"sources":["C:/Users/DELL/Desktop/web development/New folder (2)/client/src/Header.js"],"sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport {Link} from 'react-router-dom';\r\nimport { UserContext } from './UserContext';\r\n\r\nexport default function Header(){\r\n  const {setUserInfo,userInfo}= useContext(UserContext);  // const [username,setUsernme]= useState(null); \r\n  useEffect(()=>{ //checking if we are logged in--> how:we have token inside our cookies but anyone can have cookies so we need check this token if it's valid need to create endpoint for this( this is our endpoint useEffect)\r\n    fetch('http://localhost:4000/profile',{\r\n      credentials: 'include',\r\n    }).then(response=>{\r\n       response.json().then(userInfo=>{// setUsernme(userInfo.username);\r\n          setUserInfo(userInfo);// setting above fetched username name\r\n       });\r\n    });\r\n  },[]);\r\n\r\n  function logout(){ //we have reset cookie\r\n      fetch('http://localhost:4000/logout',{\r\n        credentials: 'include',\r\n        method: 'POST',\r\n      });\r\n      setUserInfo(null);\r\n  }\r\n\r\n   const username=userInfo?.username;\r\n    return (\r\n    <header>\r\n    <Link to=\"/\" className=\"logo\">MyBlog</Link>\r\n    <nav>\r\n      {username && (\r\n        <>\r\n          <span>Hello, {username}</span>\r\n          <Link to=\"/create\">Create new post</Link>\r\n          <a onClick={logout}>Logout(</a>\r\n        </>\r\n      )}\r\n\r\n      {!username && (\r\n        <>\r\n        <Link to=\"/login\">Login</Link>\r\n        <Link to=\"/register\">Register</Link>\r\n        </>\r\n      )}\r\n    </nav>\r\n  </header> );\r\n}"],"mappings":";;AAAA,SAASA,UAAU,EAAEC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACvD,SAAQC,IAAI,QAAO,kBAAkB;AACrC,SAASC,WAAW,QAAQ,eAAe;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAE5C,eAAe,SAASC,MAAMA,CAAA,EAAE;EAAAC,EAAA;EAC9B,MAAM;IAACC,WAAW;IAACC;EAAQ,CAAC,GAAEZ,UAAU,CAACI,WAAW,CAAC,CAAC,CAAE;EACxDH,SAAS,CAAC,MAAI;IAAE;IACdY,KAAK,CAAC,+BAA+B,EAAC;MACpCC,WAAW,EAAE;IACf,CAAC,CAAC,CAACC,IAAI,CAACC,QAAQ,IAAE;MACfA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAACF,IAAI,CAACH,QAAQ,IAAE;QAAC;QAC7BD,WAAW,CAACC,QAAQ,CAAC,CAAC;MACzB,CAAC,CAAC;IACL,CAAC,CAAC;EACJ,CAAC,EAAC,EAAE,CAAC;EAEL,SAASM,MAAMA,CAAA,EAAE;IAAE;IACfL,KAAK,CAAC,8BAA8B,EAAC;MACnCC,WAAW,EAAE,SAAS;MACtBK,MAAM,EAAE;IACV,CAAC,CAAC;IACFR,WAAW,CAAC,IAAI,CAAC;EACrB;EAEC,MAAMS,QAAQ,GAACR,QAAQ,aAARA,QAAQ,uBAARA,QAAQ,CAAEQ,QAAQ;EAChC,oBACAd,OAAA;IAAAe,QAAA,gBACAf,OAAA,CAACH,IAAI;MAACmB,EAAE,EAAC,GAAG;MAACC,SAAS,EAAC,MAAM;MAAAF,QAAA,EAAC;IAAM;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OAAM,CAAC,eAC3CrB,OAAA;MAAAe,QAAA,GACGD,QAAQ,iBACPd,OAAA,CAAAE,SAAA;QAAAa,QAAA,gBACEf,OAAA;UAAAe,QAAA,GAAM,SAAO,EAACD,QAAQ;QAAA;UAAAI,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAO,CAAC,eAC9BrB,OAAA,CAACH,IAAI;UAACmB,EAAE,EAAC,SAAS;UAAAD,QAAA,EAAC;QAAe;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eACzCrB,OAAA;UAAGsB,OAAO,EAAEV,MAAO;UAAAG,QAAA,EAAC;QAAO;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAG,CAAC;MAAA,eAC/B,CACH,EAEA,CAACP,QAAQ,iBACRd,OAAA,CAAAE,SAAA;QAAAa,QAAA,gBACAf,OAAA,CAACH,IAAI;UAACmB,EAAE,EAAC,QAAQ;UAAAD,QAAA,EAAC;QAAK;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC,eAC9BrB,OAAA,CAACH,IAAI;UAACmB,EAAE,EAAC,WAAW;UAAAD,QAAA,EAAC;QAAQ;UAAAG,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OAAM,CAAC;MAAA,eAClC,CACH;IAAA;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACE,CAAC;EAAA;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACA,CAAC;AACX;AAACjB,EAAA,CAzCuBD,MAAM;AAAAoB,EAAA,GAANpB,MAAM;AAAA,IAAAoB,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}